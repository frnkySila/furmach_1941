## Задание 5, вариант {{ var_number }}

В рамках задания было построено несколько регрессионных моделей.

### Линейная модель

Использовалась следующая регрессия:

$$
price = \beta_1 + \beta_2 totsp + \beta_3 dist + \beta_4 walk + \beta_5 d2 + \beta_6 d3 \\ + \beta_7 d4 + \beta_8 bal + \beta_9 brick + \beta_{10} floor + \epsilon.
$$

По методу наименьших квадратов получились следующие оценки коэффициентов $\beta_i$:

{% for i in range(10) %}* $\hat{\beta_{% raw %}{{% endraw %}{{ i + 1 }}}} = {{ '%.4f' % linear_betas[i] }}{% if i < 9 %};{% else %}.{% endif %}$
{% endfor %}
График зависимости остатков от прогнозов этой модели и гистограмма остатков:

![]({{ linear_plot_url }})

$RSS = {{ '%.2f' % linear_rss }}$, $R^2_{adj} = {{ '%.3f' % linear_r2 }}$.

По графику, а так же по большому значению RSS видно, что функциональная форма выбрана неверно.

### Полулогарифмическая модель

Так как линейная модель не подошла, было решено попробовать использовать в качестве объясняемой переменной логарифм от цены, в результате чего получили следующую регрессию:

$$
\ln(price) = \beta_1 + \beta_2 totsp + \beta_3 dist + \beta_4 walk + \beta_5 d2 + \beta_6 d3 \\ + \beta_7 d4 + \beta_8 bal + \beta_9 brick + \beta_{10} floor + \epsilon.
$$

По методу наименьших квадратов получились следующие оценки коэффициентов $\beta_i$:

{% for i in range(10) %}* $\hat{\beta_{% raw %}{{% endraw %}{{ i + 1 }}}} = {{ '%.4f' % semilog_betas[i] }}{% if i < 9 %};{% else %}.{% endif %}$
{% endfor %}
График зависимости остатков от прогнозов этой модели и гистограмма остатков:

![]({{ semilog_plot_url }})

Уже гораздо лучший результат!

$RSS = {{ '%.2f' % semilog_rss }}$, $R^2_{adj} = {{ '%.3f' % semilog_r2 }}$.

### Логарифмическая модель

В отличие от предыдущей модели, вместо $totsp$ и $dist$ использованы $\ln(totsp)$ и $\ln(dist)$ соответственно:

$$
\ln(price) = \beta_1 + \ln(totsp) + \ln(dist) + \beta_4 walk + \beta_5 d2 + \beta_6 d3 \\ + \beta_7 d4 + \beta_8 bal + \beta_9 brick + \beta_{10} floor + \epsilon.
$$

По методу наименьших квадратов получились следующие оценки коэффициентов $\beta_i$:

{% for i in range(10) %}* $\hat{\beta_{% raw %}{{% endraw %}{{ i + 1 }}}} = {{ '%.4f' % log_betas[i] }}{% if i < 9 %};{% else %}.{% endif %}$
{% endfor %}
График зависимости остатков от прогнозов этой модели и гистограмма остатков:

![]({{ log_plot_url }})

По гистограмме остатков можно предположить, что остатки распределены нормально.

$RSS = {{ '%.2f' % log_rss }}$, $R^2_{adj} = {{ '%.3f' % log_r2 }}$.

### Выводы
К сожалению, даже последняя модель очень неточная и может дать лишь приблизительные результаты. Тем не менее, она позволяет оценить общую картину влияния каждой характеристики квартиры на её цену.

Она такова:

* Увеличение расстояния от центра Москвы на 1% уменьшает стоимость на $~0.13\%$;

* Близость к метро увеличивает стоимость на $10\%$;

* Наличие балкона увеличивает стоимость на $3.66\%$;

* Нахождение квартиры на этаже, отличном от первого или последнего, увеличивает стоимость на $6.36\%$;

* Если квартира одновременно в кирпичном доме и не на первом или последнем этаже, то стоимость увеличится на $9.31\%$;

* Коэффициенты $\beta_4$, $\beta_5$ и $\beta_6$ свидетельствуют о том, что, чем больше кол–во комнат в квартире, тем выше стоимость квартиры (независимо от её площади). Вкупе с коэффициентами $\beta_2$, $\beta_8$, $\beta_9$ и $\beta_{10}$ имеем следующее:

	* Увеличение площади однокомнатной квартиры на $1\%$ увеличиват стоимость на $1.14\%$;

	* Увеличение площади двухкомнатной квартиры на $1\%$ увеличиват стоимость на $1.36\%$;

	* Увеличение площади трёхкомнатной квартиры на $1\%$ увеличиват стоимость на $1.37\%$;

	* Увеличение площади четырёхкомнатной квартиры на $1\%$ увеличиват стоимость на $1.49\%$.

Напомним, что при логарифмической зависимости увеличение регрессора на $1\%$ увеличивает прогноз в $1.01^{\beta_i}$ раз, а при полулогарифмической увеличение регрессора на единицу ведёт к увеличению прогноза в $e^{\beta_i}$ раз.

